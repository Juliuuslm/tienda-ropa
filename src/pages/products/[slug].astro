---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { ProductDetails } from '@/components/products/ProductDetails';
import products from '@/data/products.json';

const { slug } = Astro.params;
const product = products.find((p) => p.slug === slug);

if (!product) {
  return Astro.redirect('/404');
}

export async function getStaticPaths() {
  return products.map((product) => ({
    params: { slug: product.slug },
    props: { product },
  }));
}
---

<BaseLayout
  title={product.name}
  description={product.description}
  image={product.image}
  type="product"
  keywords={`${product.name}, ${product.category}, ropa${product.tags ? ', ' + product.tags.join(', ') : ''}`}
>
  <!-- Breadcrumb -->
  <nav class="bg-neutral-50 py-4">
    <div class="container flex gap-2 text-xs sm:text-sm">
      <a href="/" class="text-primary-600 hover:underline">Home</a>
      <span>/</span>
      <a href="/shop" class="text-primary-600 hover:underline">Shop</a>
      <span>/</span>
      <span class="text-neutral-600">{product.name}</span>
    </div>
  </nav>

  <!-- Product Details -->
  <section class="py-12">
    <div class="container">
      <ProductDetails client:load product={product} />
    </div>
  </section>
</BaseLayout>
